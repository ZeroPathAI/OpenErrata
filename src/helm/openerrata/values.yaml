replicaCount:
  api: 2
  worker: 2

image:
  repository: ghcr.io/zeropathAI/openerrata-api
  # TODO: Pin an immutable release tag or digest before first production rollout.
  tag: latest
  # Optional immutable digest (sha256:...). When set, it takes precedence over tag.
  digest: ""
  pullPolicy: Always

migration:
  backoffLimit: 3
  activeDeadlineSeconds: 600
  ttlSecondsAfterFinished: 300

serviceAccount:
  create: true
  names:
    api: ""
    worker: ""
    selector: ""
    migrate: ""

networkPolicy:
  enabled: true

service:
  type: ClusterIP
  port: 3000

ingress:
  enabled: false
  className: nginx
  host: ""
  path: /
  pathType: Prefix
  annotations: {}
  tls:
    enabled: false
    secretName: ""

selector:
  schedule: "*/5 * * * *"
  budget: "100"

config:
  ipRangeCreditCap: "10"
  databaseEncryptionKeyId: "primary"
  # Required: blob storage backend provider ("aws" or "s3_compatible").
  blobStorageProvider: ""
  # Required: blob storage region. Use an AWS region (for "aws") or provider
  # specific value for "s3_compatible". Pulumi infers "auto" only for
  # Cloudflare R2 endpoints; other s3-compatible providers should set this
  # explicitly.
  blobStorageRegion: ""
  # Optional endpoint for "s3_compatible" providers. Must be empty for "aws".
  blobStorageEndpoint: ""
  # Required: name of the S3/R2 bucket used for investigation image blobs.
  blobStorageBucket: ""
  # Required: public URL prefix used to serve uploaded blobs.
  blobStoragePublicUrlPrefix: ""

# Secrets must be provided via --set or external secret manager
secrets:
  # Optional: use a pre-created Kubernetes Secret instead of rendering one in this chart.
  existingSecretName: ""
  # Required: Postgres connection string.
  databaseUrl: ""
  # Required: server-side OpenAI key used by worker and selector investigations.
  openaiApiKey: ""
  # Required: shared secret used to verify request signatures.
  hmacSecret: ""
  # Required: symmetric key used to encrypt transient DB-stored secrets.
  databaseEncryptionKey: ""
  # Required: credentials for blob storage uploads.
  blobStorageAccessKeyId: ""
  blobStorageSecretAccessKey: ""
