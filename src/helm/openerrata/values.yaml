replicaCount:
  api: 2
  worker: 2

image:
  repository: ghcr.io/zeropathAI/openerrata-api
  # TODO: Pin an immutable release tag or digest before first production rollout.
  tag: latest
  # Optional immutable digest (sha256:...). When set, it takes precedence over tag.
  digest: ""
  pullPolicy: Always

migration:
  backoffLimit: 3
  activeDeadlineSeconds: 600
  ttlSecondsAfterFinished: 300

service:
  type: ClusterIP
  port: 3000

selector:
  schedule: "*/5 * * * *"
  budget: "100"

config:
  ipRangeCreditCap: "10"
  databaseEncryptionKeyId: "primary"
  blobStorageEndpoint: ""
  # Required: name of the S3/R2 bucket used for investigation image blobs.
  blobStorageBucket: ""
  # Required: public URL prefix used to serve uploaded blobs.
  blobStoragePublicUrlPrefix: ""

# Secrets must be provided via --set or external secret manager
secrets:
  # Required: Postgres connection string.
  databaseUrl: ""
  # Optional when running in modes that rely on user-provided API keys only.
  openaiApiKey: ""
  # Required: shared secret used to verify request signatures.
  hmacSecret: ""
  # Required: symmetric key used to encrypt transient DB-stored secrets.
  databaseEncryptionKey: ""
  # Required: credentials for blob storage uploads.
  blobStorageAccessKeyId: ""
  blobStorageSecretAccessKey: ""
